<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FlashDrop Pro - ‰∏¥Êó∂„ÄÅÂÆâÂÖ®„ÄÅÈòÖÂêéÂç≥ÊØÅ</title>
    <meta name="referrer" content="no-referrer-when-downgrade" />
    
    <script>(function(s){s.dataset.zone='10380251',s.src='https://gizokraijaw.net/vignette.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>
    <script src="https://pl28342028.effectivegatecpm.com/a2/19/f7/a219f7c4a8d2e3bbeea9d014e51bb043.js"></script>
    <script>(function(s){s.dataset.zone='10380245',s.src='https://nap5k.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
    
    <style>
        :root { --primary: #6366f1; --bg: #030712; --card: rgba(30, 41, 59, 0.85); --text: #f8fafc; --text-muted: #94a3b8; --border: #4f46e5; --nav-bg: rgba(15, 23, 42, 0.98); --danger: #ef4444; --success: #10b981; }
        * { box-sizing: border-box; outline: none; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; min-height: 100vh; display: flex; flex-direction: column; }
        
        .app-container { display: flex; flex-direction: column; min-height: 100vh; width: 100%; padding-top: 100px; transition: opacity 0.5s; }
        
        /* Hero & Navbar */
        .navbar { position: fixed; top: 0; left: 0; right: 0; height: 80px; background: var(--nav-bg); border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; z-index: 1000; padding: 0 30px; backdrop-filter: blur(20px); }
        .logo { font-size: 22px; font-weight: 900; color: white; }
        .logo span { color: var(--primary); }
        .hero-section { text-align: center; padding: 20px; max-width: 800px; margin: 0 auto; }
        .safety-promise { background: rgba(16, 185, 129, 0.1); border: 1px solid var(--success); border-radius: 12px; padding: 8px 15px; display: inline-flex; gap: 10px; font-size: 11px; font-weight: 700; color: var(--success); margin-bottom: 15px; }

        /* ÂπøÂëäÂ∏ÉÂ±Ä */
        .main-wrapper { display: flex; width: 100%; margin: 0 auto; justify-content: center; align-items: flex-start; gap: 20px; padding: 0 15px; }
        .ad-side { width: 160px; min-width: 160px; position: sticky; top: 100px; display: flex; flex-direction: column; gap: 20px; }
        @media (max-width: 950px) { .ad-side { display: none !important; } }
        .ad-space { background: transparent; display: flex; justify-content: center; overflow: hidden; margin: 15px 0; }

        /* Ê†∏ÂøÉÂç°Áâá */
        .content-area { flex: 1; min-width: 300px; max-width: 600px; display: flex; flex-direction: column; align-items: center; }
        .card { background: var(--card); padding: 20px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.1); width: 100%; box-shadow: 0 25px 50px rgba(0,0,0,0.5); }
        .tab-group { display: flex; background: rgba(51, 65, 85, 0.7); padding: 5px; border-radius: 18px; margin-bottom: 15px; }
        .tab { flex: 1; padding: 12px; cursor: pointer; border-radius: 14px; font-size: 14px; text-align: center; color: var(--text-muted); font-weight: 800; }
        .tab.active { background: var(--primary); color: white; }
        .panel { display: none; }
        .panel.active { display: block; }

        /* ‰øÆÂ§çÂêéÁöÑËôöÁ∫øÊ°Ü */
        .file-zone { border: 2.5px dashed var(--border); border-radius: 20px; padding: 25px; background: rgba(15, 23, 42, 0.5); cursor: pointer; display: block; text-align: center; margin-bottom: 15px; width: 100%; }
        .text-zone { border: 1.5px solid var(--border); border-radius: 20px; padding: 12px; background: rgba(15, 23, 42, 0.5); height: 120px; margin-bottom: 15px; }
        textarea { background: transparent; border: none; color: white; resize: none; width: 100%; height: 100%; font-size: 14px; }

        /* ÊÅ¢Â§çÁöÑÊöÇÂ≠òÂå∫ */
        #stagedList { display: none; background: rgba(15, 23, 42, 0.6); border: 1px solid var(--border); border-radius: 12px; padding: 8px; margin-bottom: 15px; max-height: 120px; overflow-y: auto; width: 100%; }
        .staged-item { display: flex; justify-content: space-between; align-items: center; font-size: 12px; padding: 6px 10px; background: rgba(255,255,255,0.05); border-radius: 8px; margin-bottom: 5px; }

        button.action-btn { background: var(--primary); color: white; border: none; padding: 16px; border-radius: 16px; font-size: 14px; cursor: pointer; width: 100%; font-weight: 800; box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4); text-transform: uppercase; }
        
        #senderCodeArea { margin-top: 20px; border: 2px solid var(--success); border-radius: 24px; padding: 20px; display: none; text-align: center; background: rgba(16, 185, 129, 0.05); }
        .code-display { font-size: 50px; letter-spacing: 6px; font-weight: 900; color: #a5b4fc; margin: 10px 0; }
        #qrcode { background: white; padding: 10px; border-radius: 12px; display: inline-block; }

        .pg-container { width: 100%; height: 8px; background: rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden; margin: 15px 0; display: none; }
        .pg-bar { height: 100%; width: 0%; background: var(--primary); }

        .legal-footer { padding: 30px 20px; background: #030712; color: var(--text-muted); text-align: center; font-size: 11px; border-top: 1px solid var(--border); margin-top: auto; }
        .stars-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%); }
        
        #scanner-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; display: none; flex-direction: column; align-items: center; justify-content: center; }
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.9); z-index: 5000; display: none; justify-content: center; align-items: center; flex-direction: column; }
    </style>
</head>
<body>

<div class="app-container" id="app">
    <div class="stars-container" id="stars"></div>
    <nav class="navbar">
        <div class="logo">‚ö° Flash<span>Drop</span> Pro</div>
        <div id="currentLangTag" style="font-size:10px; color:var(--primary); font-weight:900; border:1.5px solid var(--primary); padding:2px 6px; border-radius:6px;">EN</div>
    </nav>

    <header class="hero-section">
        <div class="safety-promise">
            <span id="prom-1">‚úì No Signup</span><span id="prom-2">‚úì No Storage</span><span id="prom-3">‚úì No Logs</span>
        </div>
        <h1 id="h-title" style="font-size:24px; font-weight:900; margin-bottom:10px;">Temporary & <span>Vanishing</span></h1>
    </header>

    <div class="ad-space ad-top">
        <script>atOptions={'key':'fabada29768bc51cc0a6a76937a99ba9','format':'iframe','height':90,'width':728,'params':{}};</script>
        <script src="https://www.highperformanceformat.com/fabada29768bc51cc0a6a76937a99ba9/invoke.js"></script>
    </div>

    <div class="main-wrapper">
        <aside class="ad-side">
            <script>atOptions={'key':'bd9abdb5a8bd5a53648a9afb54343727','format':'iframe','height':600,'width':160,'params':{}};</script>
            <script src="https://www.highperformanceformat.com/bd9abdb5a8bd5a53648a9afb54343727/invoke.js"></script>
        </aside>

        <main class="content-area">
            <div class="card">
                <div class="tab-group">
                    <div id="tab-send" class="tab active" onclick="switchTab('send', event)">SEND</div>
                    <div id="tab-receive" class="tab" onclick="switchTab('receive', event)">RECEIVE</div>
                </div>

                <div id="panel-send" class="panel active">
                    <label class="file-zone" for="fileInput">
                        <div style="font-size: 32px;">üìÇ</div>
                        <div id="label-files" style="font-size:13px; margin-top:8px; font-weight:900;">Drop / Click</div>
                    </label>
                    <input type="file" id="fileInput" multiple style="display:none;" onchange="handleFiles(this.files)">
                    
                    <div id="stagedList"></div>

                    <div class="text-zone">
                        <textarea id="quickText" placeholder="Paste text here..."></textarea>
                    </div>

                    <div style="margin-bottom:15px; text-align:center;">
                        <span id="label-limit" style="font-size:12px; color:var(--text-muted);">Limit: </span>
                        <select id="downloadLimit" style="background:#0f172a; color:#fff; border:1.5px solid var(--border); padding:5px; border-radius:8px;">
                            <option value="1">1 Time</option><option value="3">3 Times</option><option value="5">5 Times</option><option value="999">Unlimited</option>
                        </select>
                    </div>

                    <button class="action-btn" id="btn-share-main" onclick="triggerAd('send')">START SHARING</button>

                    <div id="senderCodeArea">
                        <div id="qrcode"></div>
                        <div class="code-display" id="myCode">000000</div>
                        <div id="expiryTimer" style="font-size:14px; color:var(--danger); font-weight:900;">Expires: 10:00</div>
                        <button class="action-btn" onclick="resetSender()" style="background:var(--danger); margin-top:15px;">STOP & DESTROY</button>
                    </div>
                </div>

                <div id="panel-receive" class="panel">
                    <input type="number" id="targetCode" placeholder="000000" style="width:100%; padding:15px; font-size:28px; text-align:center; background:#0f172a; border:2.5px solid var(--border); border-radius:15px; color:white; margin-bottom:15px;">
                    <button class="action-btn" id="btn-receive-main" onclick="triggerAd('receive')">DOWNLOAD</button>
                    <div id="receive-pg-container" class="pg-container"><div id="receive-pg-bar" class="pg-bar"></div></div>
                    <div id="receivedText-container" style="display:none; margin-top:15px; padding:12px; background:rgba(255,255,255,0.05); border-radius:15px;">
                        <div id="receivedText" style="word-break:break-all; font-size:13px; margin-bottom:10px;"></div>
                        <button class="action-btn" onclick="copyText()">COPY</button>
                    </div>
                    <div id="mobileDownloadArea" style="display:none; margin-top:15px;"><button class="action-btn" id="btn-save-file" style="background:var(--success);">SAVE FILE</button></div>
                </div>
            </div>

            <div class="ad-space ad-bottom">
                <script>atOptions={'key':'fabada29768bc51cc0a6a76937a99ba9','format':'iframe','height':90,'width':728,'params':{}};</script>
                <script src="https://www.highperformanceformat.com/fabada29768bc51cc0a6a76937a99ba9/invoke.js"></script>
            </div>
            <div style="width:100%; margin-top:20px;"><div id="history-list"></div></div>
        </main>

        <aside class="ad-side">
            <script>atOptions={'key':'bd9abdb5a8bd5a53648a9afb54343727','format':'iframe','height':600,'width':160,'params':{}};</script>
            <script src="https://www.highperformanceformat.com/bd9abdb5a8bd5a53648a9afb54343727/invoke.js"></script>
        </aside>
    </div>

    <footer class="legal-footer">
        <p>Tel: +1 929-266-4485 | Email: flashdroppro@gmail.com</p>
        <p style="margin-top:5px; opacity:0.5;">Efficiency First. Direct P2P. No Logs.</p>
    </footer>
</div>

<div class="modal-overlay" id="adModal">
    <div id="ad-wait-title" style="color:white; margin-bottom:10px; font-weight:bold;">Checking...</div>
    <div style="width: 280px; height: 6px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden; margin-bottom: 20px;">
        <div id="ad-pg-bar" style="height: 100%; width: 0%; background: var(--primary);"></div>
    </div>
    <div style="width:300px; height:250px; background:white; border-radius:15px; overflow:hidden;">
        <script>atOptions={'key':'05aeca9dfc228cb50e7ad828813cd55b','format':'iframe','height':250,'width':300,'params':{}};</script>
        <script src="https://www.highperformanceformat.com/05aeca9dfc228cb50e7ad828813cd55b/invoke.js"></script>
    </div>
</div>

<script>
    const I18N = {
        en: { send: "SEND", receive: "RECEIVE", drop: "Drop / Click", start: "START SHARING", dl: "DOWNLOAD", prom1: "‚úì No Signup", prom2: "‚úì No Storage", prom3: "‚úì No Logs", limit: "Limit: ", exp: "Expires: ", save: "SAVE FILE", copy: "COPY" },
        zh: { send: "ÂèëÈÄÅ", receive: "Êé•Êî∂", drop: "ÊãñÊãΩ / ÁÇπÂáª", start: "ÂºÄÂßãÂàÜ‰∫´", dl: "Á´ãÂç≥‰∏ãËΩΩ", prom1: "‚úì Êó†ÈúÄÊ≥®ÂÜå", prom2: "‚úì ‰∏çÂÅöÂ≠òÂÇ®", prom3: "‚úì Èõ∂Êó•Âøó", limit: "ÈôêÂà∂: ", exp: "Âà∞Êúü: ", save: "‰øùÂ≠òÊñá‰ª∂", copy: "Â§çÂà∂ÊñáÂ≠ó" },
        ja: { send: "ÈÄÅ‰ø°", receive: "Âèó‰ø°", drop: "„ÇØ„É™„ÉÉ„ÇØ/„Éâ„É≠„ÉÉ„Éó", start: "ÂÖ±ÊúâÈñãÂßã", dl: "„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ", prom1: "‚úì ÁôªÈå≤‰∏çË¶Å", prom2: "‚úì ‰øùÂ≠ò„Å™„Åó", prom3: "‚úì „É≠„Ç∞„Å™„Åó", limit: "Âà∂Èôê: ", exp: "ÊúüÈôê: " },
        ko: { send: "Î≥¥ÎÇ¥Í∏∞", receive: "Î∞õÍ∏∞", drop: "ÌÅ¥Î¶≠/ÎìúÎ°≠", start: "Í≥µÏú† ÏãúÏûë", dl: "Îã§Ïö¥Î°úÎìú", prom1: "‚úì Í∞ÄÏûÖ ÏóÜÏùå", prom2: "‚úì Ï†ÄÏû• ÏóÜÏùå", prom3: "‚úì Î°úÍ∑∏ ÏóÜÏùå", limit: "Ï†úÌïú: ", exp: "ÎßåÎ£å: " },
        es: { send: "ENVIAR", receive: "RECIBIR", drop: "Soltar / Click", start: "INICIAR", dl: "DESCARGAR", prom1: "‚úì Sin registro", prom2: "‚úì Sin almacenamiento", prom3: "‚úì Sin registros", limit: "L√≠mite: ", exp: "Expira: " },
        hi: { send: "‡§≠‡•á‡§ú‡•á‡§Ç", receive: "‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç", drop: "‡§°‡•ç‡§∞‡•â‡§™ / ‡§ï‡•ç‡§≤‡§ø‡§ï", start: "‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç", dl: "‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§°", prom1: "‚úì ‡§ï‡•ã‡§à ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§®‡§π‡•Ä‡§Ç", prom2: "‚úì ‡§ï‡•ã‡§à ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú ‡§®‡§π‡•Ä‡§Ç", prom3: "‚úì ‡§ï‡•ã‡§à ‡§≤‡•â‡§ó ‡§®‡§π‡•Ä‡§Ç", limit: "‡§∏‡•Ä‡§Æ‡§æ: ", exp: "‡§∏‡§Æ‡§æ‡§™‡•ç‡§§‡§ø: " }
    };

    let currLang = "en", peer = null, stagedFiles = [], expiryTimerIdx = null, activeConn = null, downloads = 0;
    const PREFIX = "fd-pro-", CHUNK_SIZE = 262144;

    function applyI18N() {
        const userLang = navigator.language.split('-')[0];
        currLang = I18N[userLang] ? userLang : "en";
        const d = I18N[currLang];
        document.getElementById('currentLangTag').innerText = currLang.toUpperCase();
        document.getElementById('tab-send').innerText = d.send; document.getElementById('tab-receive').innerText = d.receive;
        document.getElementById('label-files').innerText = d.drop; document.getElementById('btn-share-main').innerText = d.start;
        document.getElementById('btn-receive-main').innerText = d.dl; document.getElementById('label-limit').innerText = d.limit;
        document.getElementById('prom-1').innerText = d.prom1; document.getElementById('prom-2').innerText = d.prom2; document.getElementById('prom-3').innerText = d.prom3;
    }

    function handleFiles(files) { 
        stagedFiles = stagedFiles.concat(Array.from(files)); 
        renderStagedList(); 
    }

    function renderStagedList() {
        const list = document.getElementById('stagedList');
        if (stagedFiles.length === 0) { list.style.display = 'none'; return; }
        list.style.display = 'block';
        list.innerHTML = stagedFiles.map((f, i) => `
            <div class="staged-item">
                <span>üìÑ ${f.name.length > 20 ? f.name.substring(0,17)+'...' : f.name}</span>
                <span style="color:var(--danger); cursor:pointer; font-weight:bold;" onclick="removeFile(${i})">‚úï</span>
            </div>
        `).join('');
    }

    function removeFile(index) { stagedFiles.splice(index, 1); renderStagedList(); }

    function triggerAd(mode) {
        const modal = document.getElementById('adModal');
        const adPg = document.getElementById('ad-pg-bar');
        modal.style.display = 'flex'; adPg.style.width = '0%';
        let elapsed = 0; const totalMs = 3000;
        const itv = setInterval(() => { 
            elapsed += 100; adPg.style.width = (elapsed/totalMs)*100 + '%';
            if(elapsed >= totalMs) { clearInterval(itv); modal.style.display = 'none'; mode === 'send' ? initSender() : startReceiving(); } 
        }, 100);
    }

    async function initSender() {
        if(peer) peer.destroy(); downloads = 0;
        const code = Math.floor(100000 + Math.random() * 900000);
        peer = new Peer(PREFIX + code);
        peer.on('open', () => {
            document.getElementById('senderCodeArea').style.display = 'block';
            document.getElementById('myCode').innerText = code;
            document.getElementById('qrcode').innerHTML = "";
            new QRCode(document.getElementById('qrcode'), { text: window.location.origin + window.location.pathname + "?c=" + code, width: 120, height: 120 });
            startExpiryTimer();
        });
        peer.on('connection', c => {
            c.on('data', d => { if(d.type === 'confirm') { downloads++; if(downloads >= parseInt(document.getElementById('downloadLimit').value)) resetSender(); } });
            c.on('open', async () => {
                const text = document.getElementById('quickText').value;
                if(text) c.send({ type: 'text', data: text });
                if(stagedFiles.length > 0) {
                    let fb, fn;
                    if(stagedFiles.length === 1) { fb = stagedFiles[0]; fn = stagedFiles[0].name; }
                    else { const zip = new JSZip(); stagedFiles.forEach(f => zip.file(f.name, f)); fb = await zip.generateAsync({type:"blob"}); fn = "Bundle.zip"; }
                    c.send({ type: 'meta', name: fn, size: fb.size });
                    for(let i=0; i<fb.size; i+=CHUNK_SIZE) { c.send({ type: 'chunk', index: i/CHUNK_SIZE, data: await fb.slice(i, i+CHUNK_SIZE).arrayBuffer() }); }
                    c.send({ type: 'done' });
                }
            });
        });
    }

    function startReceiving() {
        const code = document.getElementById('targetCode').value;
        const rPeer = new Peer();
        const pgBar = document.getElementById('receive-pg-bar');
        document.getElementById('receive-pg-container').style.display = 'block';
        rPeer.on('open', () => {
            const c = rPeer.connect(PREFIX + code); activeConn = c;
            let meta = null, chunks = [], totalRecv = 0;
            c.on('data', d => {
                if(d.type === 'text') { document.getElementById('receivedText').innerText = d.data; document.getElementById('receivedText-container').style.display = 'block'; }
                else if(d.type === 'meta') { meta = d; document.getElementById('mobileDownloadArea').style.display = 'block'; }
                else if(d.type === 'chunk') { chunks[d.index] = d.data; totalRecv += d.data.byteLength; if(meta) pgBar.style.width = (totalRecv/meta.size)*100 + '%'; }
                else if(d.type === 'done') {
                    const b = new Blob(chunks); const u = URL.createObjectURL(b);
                    const btn = document.getElementById('btn-save-file');
                    btn.onclick = () => { 
                        const a = document.createElement('a'); a.href = u; a.download = meta.name; a.click(); 
                        c.send({type:'confirm'}); setTimeout(() => location.reload(), 1000);
                    };
                }
            });
        });
    }

    function startExpiryTimer() { 
        let sec = 600; if(expiryTimerIdx) clearInterval(expiryTimerIdx); 
        expiryTimerIdx = setInterval(() => { 
            sec--; document.getElementById('expiryTimer').innerText = `${I18N[currLang].exp}${Math.floor(sec/60)}:${(sec%60).toString().padStart(2,'0')}`; 
            if(sec <= 0) resetSender(); 
        }, 1000); 
    }
    
    function resetSender() { if(peer) peer.destroy(); location.reload(); }
    function switchTab(m, e) { document.querySelectorAll('.tab').forEach(t => t.classList.remove('active')); document.querySelectorAll('.panel').forEach(p => p.classList.remove('active')); e.target.classList.add('active'); document.getElementById(`panel-${m}`).classList.add('active'); }
    function copyText() { navigator.clipboard.writeText(document.getElementById('receivedText').innerText); alert("Copied!"); if(activeConn) activeConn.send({type:'confirm'}); }
    
    window.onload = () => {
        applyI18N();
        const urlParams = new URLSearchParams(window.location.search);
        if(urlParams.get('c')) { document.getElementById('targetCode').value = urlParams.get('c'); switchTab('receive', {target: document.getElementById('tab-receive')}); }
    };
</script>
</body>
</html>
